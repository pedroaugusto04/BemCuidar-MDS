<app-nav-bar></app-nav-bar>
<div class="container">
  <h1>Anuncie seu serviço</h1>
  <div class="div-form">
    <form [formGroup]="form">
      <div class="fields">
        <div class="title-about-yourself">
          <h2>Sobre você:</h2>
        </div>
        <mat-form-field class="input" id="nameField" appearance="outline">
          <mat-label>Nome</mat-label>
          <input matInput formControlName="name" />
          @if(form.get("name")?.invalid){
          <mat-error>{{ formErrorMessage("name") }}</mat-error>
          }
        </mat-form-field>
        <mat-form-field class="input" id="age-field" appearance="outline">
          <mat-label>Idade</mat-label>
          <input matInput formControlName="age" />
          @if(form.get("age")?.invalid){
          <mat-error>{{ formErrorMessage("age") }}</mat-error>
          }
        </mat-form-field>
        <div class="upload-img">
          <input
            #fileInput
            type="file"
            (change)="onFileSelected($event)"
            accept="image/jpeg, image/png"
            class="hidden-input"
          />
          @if(!selectedImage){
          <div class="empty-projects">
            <button id="add-img-button" (click)="triggerFile(fileInput)">
              <span class="add-project">
                <mat-icon class="mat-18">collections</mat-icon>
                <label>Foto para upload</label>
              </span>
            </button>
          </div>
          } @else {
          <button id="add-img-button" (click)="triggerFile(fileInput)">
            <img
              class="project-cover"
              [src]="selectedImage"
              alt="Imagem selecionada"
            />
          </button>
          }
        </div>
        <div class="title-localization">
          <h3>Sobre o local:</h3>
        </div>
        <mat-form-field class="input" id="country-field" appearance="outline">
          <mat-label>País</mat-label>
          <input matInput formControlName="country" />
          @if(form.get("country")?.invalid){
          <mat-error>{{ formErrorMessage("country") }}</mat-error>
          }
        </mat-form-field>
        <mat-form-field class="input" id="state-field" appearance="outline">
          <mat-label>Estado</mat-label>
          <input matInput formControlName="state" />
          @if(form.get("state")?.invalid){
          <mat-error>{{ formErrorMessage("state") }}</mat-error>
          }
        </mat-form-field>
        <mat-form-field class="input" id="city-field" appearance="outline">
          <mat-label>Cidade</mat-label>
          <input matInput formControlName="city" />
          @if(form.get("city")?.invalid){
          <mat-error>{{ formErrorMessage("city") }}</mat-error>
          }
        </mat-form-field>
        <div class="description">
          <mat-form-field
            id="description-field"
            class="input"
            appearance="outline"
          >
            <mat-label>Descrição do tipo de Serviço</mat-label>
            <textarea
              matInput
              formControlName="service_description"
              rows="5"
              cols="50"
            ></textarea>
            @if(form.get("service_description")?.invalid){
            <mat-error>{{ formErrorMessage("service_description") }}</mat-error>
            }
          </mat-form-field>
        </div>
        <div class="class-button-register">
          <button
            (click)="registerProvider()"
            id="button-register"
            mat-flat-button
            color="white"
          >
            ANUNCIAR
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
